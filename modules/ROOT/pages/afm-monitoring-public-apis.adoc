= Monitoring the Endpoints of Public APIs
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:page-aliases: afm-public-versus-private.adoc
:imagesdir: ../assets/images

Public APIs are APIs with endpoints that are exposed to the open internet. In API Functional Monitoring (AFM), tests of such endpoints are run by workers that themselves run in public locations or private locations. A _public location_ is a region (which you can think of as a resource pool) that is shared with other MuleSoft customers. Examples of such regions are `us-east-1`, `us-east-2`, and `eu-central-1`. For information about private locations, see xref:afm-monitoring-private-apis.adoc[Monitoring the Endpoints of Private APIs].

The tests in monitors are run on schedules. For a worker to run in a public location according to a schedule, a schedule must be associated with it. A public location can be associated with more than one schedule for more than one monitor.

The following diagrams depict the types of relationship that can exist between monitors, schedules, public locations, APIs, and environments. 

* First relationship type
+
image::afm-monitor-1.png[]
+
A monitor runs on a single schedule. The schedule is associated with a public location. The monitor is written to test one or more endpoints in public API 1 and in public API 2, though it could also test endpoints in a larger number of public APIs. The two APIs are in a single environment.

* Second relationship type
+
image::afm-monitor-2.png[]
+
A monitor runs on two separate schedules, and each is associated with the same public location. The monitor is written to test one or more endpoints in public API 1 and in public API 2, though it could also test endpoints in a larger number of public APIs. The two APIs are in a single environment.

* Third relationship type
+
image::afm-monitor-3.png[]
+
A monitor runs on two separate schedules, and each is associated with a different public location. The monitor is written to test one or more endpoints in public API 1 and in public API 2, though it could also test endpoints in a larger number of public APIs. The two APIs are in a single environment.

* Fourth relationship type
+
image::afm-monitor-4.png[]
+
A monitor runs on two separate schedules, and each is associated with the same public location, though each could be associated with a different public location. Each of the two tested public APIs is in a different environment. One environment could be a test environment, and the other environment could be a production environment. Public API 1 and public API 2 are copies of the same API. The monitor is written to test one or more endpoints in public API 1 and the same endpoints in public API 2, though it could also test endpoints in a larger number of public APIs.

* Fifth relationship type
+
image::afm-monitor-5.png[]
+
A monitor runs on a single schedule, though it could run on two. The schedule is associated with a public location. The monitor is written to test one or more endpoints in public API 1 and in public API 2 (though it could also test endpoints in a larger number of public APIs), both of which are accessible on the World-Wide Web.

== Length of Time Before Tests Time Out

To prevent tests run in public locations from consuming too many resources, AFM prevents tests from waiting longer than 120 seconds for a response from an endpoint. You cannot increase this wait time.

== Scheduling Tests

Tests are run at fixed intervals that you define in schedules. Each test is associated with a schedule. When you run tests against the endpoints of public APIs, AFM sets limitations on the following aspects of scheduling:

Number of Schedules::
+
By default, AFM lets your organization in Anypoint Platform run up to five schedules for testing from public locations at one time. If you reach the limit of five schedules and want to run more monitors simultaneously, contact your MuleSoft administrator about raising your maximum.

You can also run monitors from private locations, if you have access to Anypoint Virtual Private Cloud. There is no limit to the number of schedules that you can create to use private locations.

You can monitor public APIs from private locations, too, not just private APIs.

Duration of Intervals Between Executions of Tests::
+
The shortest interval that you can schedule to occur between tests is fifteen minutes.
